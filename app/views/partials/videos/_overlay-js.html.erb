<script>
var isItOpen = false;

function muffinMan(vid_id) {
  damn = document.getElementById('the-all-and-everything');
  di = document.getElementById('di');
  di.innerHTML = "";
    if (isItOpen != true) {
        // setting damn to blurr will only blurr it. The propery way is to blurr everything
        // other than di
        damn.classList.add("blurr");
        di.classList.add("bg-sad");
        isItOpen = true;
        id = vid_id;
        <% if search != nil %>
          search = document.getElementById('cs-search-form');
          search.classList.add("blurr");
        <% end %>
    } else {
        if (id == vid_id) {
        // See first comment, but reverse it here. 
        damn.classList.remove("blurr");
        di.classList.remove("bg-sad");
        di.classList.add("bg-ha");
        isItOpen = false;
        <% if search != nil %>
          search = document.getElementById('cs-search-form');
          search.classList.remove("blurr");
        <% end %>
        } else {
          id = vid_id;
        }
    }
}
</script>